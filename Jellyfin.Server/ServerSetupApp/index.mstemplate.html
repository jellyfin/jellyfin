<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <title>
        {{#IF isInReportingMode}}
        ‚ùå
        {{/IF}}
        Jellyfin Startup
    </title>
    <style>
        * {
            font-family: sans-serif;
        }

        .flex-row {
            display: flex;
            flex-direction: row;
            flex-wrap: nowrap;
            justify-content: center;
            align-items: center;
            align-content: normal;
        }

        .flex-col {
            display: flex;
            flex-direction: column;
            flex-wrap: nowrap;
            justify-content: center;
            align-items: center;
            align-content: normal;
        }

        header {
            height: 5rem;
            width: 100%;
        }

        header svg {
            height: 3rem;
            width: 9rem;
            margin-right: 1rem;
        }

        /* ol.action-list {
            list-style-type: none;
            position: relative;
        } */

        ol.action-list * {
            font-family: monospace;
            font-weight: 300;
            font-size: clamp(18px, 100vw / var(--width), 20px);
            font-feature-settings: 'onum', 'pnum';
            line-height: 1.8;
            -webkit-text-size-adjust: none;
        }

        /*
        ol.action-list li {
            padding-top: .5rem;
        }

        ol.action-list li::before {
            position: absolute;
            left: -0.8em;
            font-size: 1.1em;
        } */

        /* Attribution as heavily inspired by: https://iamkate.com/code/tree-views/ */
        .action-list {
            --spacing: 1.4rem;
            --radius: 14px;
        }

        .action-list li {
            display: block;
            position: relative;
            padding-left: calc(2 * var(--spacing) - var(--radius) - 1px);
        }

        .action-list ul {
            margin-left: calc(var(--radius) - var(--spacing));
            padding-left: 0;
        }

        .action-list ul li {
            border-left: 2px solid #ddd;
        }

        .action-list ul li:last-child {
            border-color: transparent;
        }

        .action-list ul li::before {
            content: '';
            display: block;
            position: absolute;
            top: calc(var(--spacing) / -2);
            left: -2px;
            width: calc(var(--spacing) + 2px);
            height: calc(var(--spacing) + 1px);
            border: solid #ddd;
            border-width: 0 0 2px 2px;
        }

        .action-list summary {
            display: block;
            cursor: pointer;
        }

        .action-list summary::marker,
        .action-list summary::-webkit-details-marker {
            display: none;
        }

        .action-list summary:focus {
            outline: none;
        }

        .action-list summary:focus-visible {
            outline: 1px dotted #000;
        }

        .action-list li::after,
        .action-list summary::before {
            content: '';
            display: block;
            position: absolute;
            top: calc(var(--spacing) / 2 - var(--radius) + 4px);
            left: calc(var(--spacing) - var(--radius) - -5px);
        }

        .action-list summary::before {
            z-index: 1;
            /* background: #696 url('expand-collapse.svg') 0 0; */
        }

        .action-list details[open]>summary::before {
            background-position: calc(-2 * var(--radius)) 0;
        }

        .action-list li.danger-item::after,
        .action-list li.danger-strong-item::after {
            content: '‚ùå';
        }

        ol.action-list li span.danger-strong-item {
            text-decoration-style: solid;
            text-decoration-color: red;
            text-decoration-line: underline;
        }

        ol.action-list li.warn-item::after {
            content: '‚ö†Ô∏è';
        }

        ol.action-list li.success-item::after {
            content: '‚úÖ';
        }

        ol.action-list li.info-item::after {
            content: 'üîπ';
        }

        /* End Attribution */
    </style>
</head>

<body>
    <div>
        <header class="flex-row">
            <svg width="389" height="144" viewBox="0 0 389 144" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M36.4819 100.995C31.8052 91.6047 62.4765 36 72 36C81.5327 36 112.153 91.713 107.527 100.995C102.902 110.277 41.1585 110.386 36.4819 100.995ZM49.408 92.5253C52.2216 98.1738 91.8824 98.0113 94.6133 92.5273C97.3441 87.0434 77.789 51.01 72.0093 51.01C66.2295 51.01 46.5944 86.8768 49.408 92.5253Z"
                    fill="black" />
                <path
                    d="M72.0001 63.5C68.4809 63.5 57.9681 82.3745 59.7084 85.8691C61.4488 89.3637 82.5525 89.3605 84.2912 85.8691C86.0299 82.3777 75.5193 63.5 72.0001 63.5Z"
                    fill="black" />
                <path
                    d="M150.023 45.7801C153.651 45.5898 155.688 45.6179 159.268 45.78C159.768 45.7842 160.172 46.1907 160.172 46.6915V80.0654C160.172 82.7619 159.679 85.2089 158.688 87.4009L158.686 87.4035C157.696 89.5408 156.288 91.3665 154.464 92.8779C152.693 94.3878 150.588 95.5558 148.154 96.3846L148.15 96.3859C145.763 97.164 143.149 97.5513 140.31 97.5513C137.67 97.5513 135.304 97.1372 133.217 96.3023L133.208 96.2987C131.186 95.4173 129.443 94.2999 127.984 92.9444L127.979 92.9406C126.578 91.5912 125.459 90.1342 124.624 88.5692C123.891 87.1953 123.358 85.8565 123.027 84.5531C122.915 84.1125 123.157 83.6737 123.563 83.5086C126.166 82.1323 127.959 81.5004 131.442 80.52C131.916 80.349 132.43 80.5959 132.613 81.054C133.387 82.9972 134.365 84.5019 135.536 85.5838C136.852 86.7527 138.487 87.3429 140.463 87.3429C141.945 87.3429 143.353 86.9975 144.689 86.3047C146.003 85.6231 147.059 84.5245 147.852 82.9888L147.855 82.9818C148.691 81.4577 149.12 79.4699 149.12 76.9988V46.6915C149.12 46.1911 149.524 45.7849 150.023 45.7801Z"
                    fill="black" />
                <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M183.594 56.5996C179.662 56.5996 176.157 57.4797 173.089 59.2476C170.075 60.9623 167.685 63.3536 165.92 66.4161L165.918 66.4196C164.202 69.4879 163.348 73.0173 163.348 76.9988C163.348 80.9786 164.175 84.5068 165.839 87.5744L165.841 87.578C167.554 90.6404 169.893 93.0574 172.854 94.8238L172.857 94.8259C175.824 96.5434 179.227 97.3979 183.057 97.3979C186.101 97.3979 188.82 96.9853 191.21 96.1539C193.597 95.3236 195.654 94.1272 197.375 92.563C198.979 91.0998 200.306 89.4005 201.352 87.4668C201.61 86.9906 201.384 86.4124 200.899 86.2123C197.968 84.7103 196.217 84.0316 192.941 83.1101C192.502 82.9482 192.027 83.1464 191.805 83.5351C191.133 84.708 190.231 85.6878 189.093 86.4761C187.829 87.3012 186.183 87.7263 184.131 87.7263C182.439 87.7263 180.851 87.3789 179.362 86.685C177.929 85.9429 176.744 84.906 175.803 83.571C175.124 82.5131 174.705 81.3226 174.547 79.9946H201.702C202.204 79.9946 202.616 79.5859 202.609 79.078C202.539 74.4477 201.665 70.4839 199.973 67.1981C198.265 63.7303 195.953 61.1024 193.036 59.33C190.174 57.51 187.025 56.5996 183.594 56.5996ZM179.643 66.5571C180.943 66.0569 182.157 65.8113 183.287 65.8113C184.417 65.8113 185.577 66.0566 186.77 66.5539L186.775 66.5556C187.999 67.0453 189.027 67.8281 189.863 68.9099L189.868 68.9154C190.482 69.6743 190.873 70.6492 191.027 71.8563H175.092C175.255 70.6535 175.668 69.6811 176.317 68.9227C177.256 67.8356 178.364 67.0489 179.643 66.5571Z"
                    fill="black" />
                <path
                    d="M206 43.3842C209.521 43.213 211.486 43.2055 214.939 43.3842C215.438 43.389 215.841 43.7953 215.841 44.2957V95.5665C215.841 96.0678 215.437 96.4745 214.936 96.4779C211.479 96.6057 209.519 96.6091 206.002 96.4779C205.501 96.4745 205.096 96.0678 205.096 95.5665V44.2957C205.096 43.7951 205.5 43.3887 206 43.3842Z"
                    fill="black" />
                <path
                    d="M221.71 43.3842C225.198 43.2152 227.162 43.221 230.649 43.3842C231.148 43.3885 231.552 43.7949 231.552 44.2956V95.5664C231.552 96.0679 231.147 96.4747 230.647 96.4779C227.215 96.5959 225.258 96.6021 221.713 96.4779C221.212 96.4746 220.807 96.0678 220.807 95.5664V44.2956C220.807 43.795 221.211 43.3887 221.71 43.3842Z"
                    fill="black" />
                <path
                    d="M265.604 57.5196C269.379 57.3603 271.549 57.3288 275.428 57.5196C276.074 57.5253 276.51 58.1847 276.26 58.7826L259.204 99.5831C258.126 102.149 256.995 104.412 255.81 106.369C254.613 108.399 253.123 109.971 251.338 111.074C249.586 112.188 247.299 112.731 244.502 112.731C243.081 112.731 241.515 112.442 239.806 111.873C238.36 111.421 237.049 110.889 235.873 110.275C235.448 110.053 235.284 109.541 235.473 109.114C236.519 106.345 237.23 104.774 238.745 101.969C238.968 101.498 239.534 101.314 239.992 101.542C240.634 101.861 241.227 102.117 241.771 102.311L241.782 102.315C242.527 102.613 243.15 102.753 243.659 102.753C244.668 102.753 245.547 102.466 246.308 101.895L246.318 101.888C247.078 101.365 247.71 100.573 248.203 99.4896L249.792 95.7446L232.877 58.8106C232.601 58.2088 233.038 57.5241 233.699 57.5196C237.475 57.3756 239.626 57.3799 243.494 57.5196C243.861 57.5221 244.191 57.7445 244.33 58.0843L254.8 83.5369L264.762 58.0987C264.898 57.7516 265.231 57.5225 265.604 57.5196Z"
                    fill="black" />
                <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M290.668 41.9275C286.322 41.9275 283.029 43.0924 280.855 45.4783C278.69 47.8019 277.629 51.0562 277.629 55.1967V95.5665C277.629 96.0692 278.036 96.4769 278.538 96.4779C282.089 96.5207 284.041 96.5119 287.464 96.4779C287.967 96.4769 288.374 96.0693 288.374 95.5665V66.2713H296.892C297.393 66.2713 297.799 65.8675 297.804 65.3679C297.923 62.8105 297.915 61.2681 297.804 58.4243C297.8 57.924 297.393 57.5196 296.892 57.5196H288.374V56.8834C288.374 54.8054 288.706 53.3809 289.311 52.543L289.316 52.5365C289.911 51.6662 290.827 51.2159 292.124 51.2159C292.649 51.2159 293.231 51.3113 293.873 51.5087C294.373 51.6628 294.923 51.8782 295.524 52.1566C295.964 52.3608 296.498 52.1958 296.731 51.7579C298.19 49.3459 298.924 47.971 299.954 45.5088C300.174 45.0662 300.002 44.5188 299.547 44.2975C298.292 43.6879 296.922 43.1582 295.436 42.708C293.776 42.1892 292.186 41.9275 290.668 41.9275ZM287.462 96.1654L287.465 96.4779L287.464 96.4779H287.462V96.1654ZM278.54 96.1654V96.4779H278.538L278.536 96.4779L278.54 96.1654ZM281.084 45.69L280.856 45.477L280.855 45.4783L280.853 45.4796L281.084 45.69Z"
                    fill="black" />
                <path
                    d="M302.253 57.5197C305.888 57.4313 307.846 57.4369 311.184 57.5197C311.685 57.522 312.091 57.9291 312.091 58.4311V95.5665C312.091 96.0689 311.684 96.4763 311.182 96.478C307.808 96.5362 305.852 96.5398 302.254 96.478C301.752 96.4763 301.346 96.0689 301.346 95.5665V58.4311C301.346 57.9291 301.752 57.5219 302.253 57.5197Z"
                    fill="black" />
                <path
                    d="M306.718 40.8542C305.096 40.8542 303.665 41.4795 302.437 42.7066C301.203 43.8878 300.579 45.3223 300.579 46.9934C300.579 48.6651 301.203 50.1234 302.434 51.3544L302.439 51.3592C303.669 52.5355 305.099 53.1326 306.718 53.1326C308.386 53.1326 309.82 52.5372 311.003 51.3544C312.234 50.1234 312.858 48.6651 312.858 46.9934C312.858 45.3234 312.235 43.8897 311.003 42.709C309.822 41.477 308.388 40.8542 306.718 40.8542Z"
                    fill="black" />
                <path
                    d="M338.424 56.5996C335.453 56.5996 332.834 57.3825 330.579 58.9554C329.367 59.7923 328.301 60.8421 327.379 62.1017L327.053 58.3521C327.012 57.8823 326.62 57.5214 326.149 57.5196C322.958 57.4544 321.129 57.4503 317.783 57.5196C317.281 57.5215 316.875 57.9289 316.875 58.4311V95.5665C316.875 96.0685 317.281 96.4757 317.782 96.4779C321.268 96.5615 323.226 96.5656 326.713 96.4779C327.214 96.4756 327.62 96.0684 327.62 95.5665V76.0788C327.62 72.8981 328.302 70.5559 329.615 68.9991C330.973 67.4483 332.894 66.6816 335.428 66.7313H335.434C336.815 66.7313 338.009 67.0514 339.026 67.6813L339.036 67.6868C340.033 68.2568 340.81 69.215 341.353 70.5964L341.357 70.6052C341.946 71.9798 342.252 73.9497 342.252 76.5388V95.5665C342.252 96.0687 342.658 96.476 343.16 96.4779C346.678 96.5518 348.633 96.5762 352.09 96.4779C352.591 96.4753 352.997 96.0682 352.997 95.5665V74.4708C353.048 70.3578 352.509 66.9877 351.361 64.3774C350.214 61.7186 348.536 59.7457 346.323 58.4808C344.119 57.2218 341.482 56.5996 338.424 56.5996Z"
                    fill="black" />
            </svg>

            {{^IF isInReportingMode}}
            <p>Jellyfin Server still starting. Please wait.</p>
            {{#ELSE}}
            <p>Jellyfin Server has encountered an error and was not able to start.</p>
            {{/ELSE}}
            {{/IF}}

            {{#IF localNetworkRequest}}
            <p style="margin-left: 1rem;">You can download the current log file <a href='/startup/logger'
                    target="_blank">here</a>.</p>
            {{/IF}}
        </header>

        {{#DECLARE LogEntry |--}}
        {{#LET children = Children}}
        <li class="{{FormatLogLevel(children).ToString()}}-item">
            {{--| #IF children.Count > 0}}
            <details open>
                <summary>{{DateOfCreation}} - {{Content}}</summary>
                <ul class="action-list">
                    {{--| #EACH children.Reverse() |-}}
                    {{#IMPORT 'LogEntry'}}
                    {{--| /EACH |-}}
                </ul>
            </details>
            {{--| #ELSE |-}}
            <span class="{{FormatLogLevel(children).ToString()}}-item">{{DateOfCreation}} - {{Content}}</span>
            {{--| /ELSE |--}}
            {{--| /IF |-}}
        </li>
        {{--| /DECLARE}}

        <div class="flex-col">
            <ol class="action-list">
                {{#FOREACH log IN logs.Reverse()}}
                {{#IMPORT 'LogEntry' #WITH log}}
                {{/FOREACH}}
            </ol>
        </div>
    </div>
</body>

{{^IF isInReportingMode}}
<script>
    setTimeout(() => {
        window.location.reload();
    }, {{ retryValue.TotalMilliseconds }});
</script>
{{/IF}}

</html>
